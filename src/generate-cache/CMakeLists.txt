include_directories(${CMAKE_CURRENT_SOURCE_DIR}/..)
include_directories(${CMAKE_CURRENT_BINARY_DIR}/..)
add_executable(darktable-generate-cache main.c)

set_target_properties(darktable-generate-cache PROPERTIES LINKER_LANGUAGE C)
if(CMAKE_COMPILER_IS_GNUCC)
	if (CMAKE_C_COMPILER_VERSION VERSION_GREATER 4.3)
		if (CMAKE_SYSTEM_NAME MATCHES "^(DragonFly|FreeBSD|NetBSD|OpenBSD)$")
			message("-- Force link to libintl on *BSD with GCC 4.3+")
			target_link_libraries(darktable-generate-cache -lintl)
		endif()
	endif()
endif()
target_link_libraries(darktable-generate-cache lib_darktable)
install(TARGETS darktable-generate-cache DESTINATION ${CMAKE_INSTALL_BINDIR})
