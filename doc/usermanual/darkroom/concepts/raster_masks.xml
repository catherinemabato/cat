<!DOCTYPE sect3 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
               "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
		<!ENTITY % darktable_dtd SYSTEM "../../dtd/darktable.dtd">
		%darktable_dtd;
		]>
<sect3 status="draft" id="raster_mask">

  <title>Raster mask</title>

  <indexterm>
    <primary>masks</primary>
    <secondary>raster masks</secondary>
  </indexterm>

  <para>
    A raster mask produced by <quote>drawn mask</quote> and/or <quote>parametric mask</quote> in the
    context of a specific module can be reused by modules that follow it in the pixelpipe.
  </para>

  <sect4 status="draft" id="raster_mask_overview">

    <title>Overview</title>

    <para>
      A mask defined in the context of a module determines the extent to which the module affects the input image.
    </para>

    <para>
      <quote>drawn mask</quote>, <quote>parametric mask</quote> or <quote>drawn and parameteric mask</quote>
      calculated for a specific module can be represented with a raster mask, that is an image with
      the same pixel arrangement as the input image in which each pixel's opacity has a value between 0%
      and 100%. Pixels with zero opacity get passed to module's output without any changes and vice versa.
    </para>

    <para>
      The raster mask of a specific module may be reused by modules that follows it in the pixelpipe.
    </para>

  </sect4>

  <sect4 id="raster_mask_usage">

    <title>Usage</title>
    <para>
	Let's start with opening the module which should use the raster mask of another module. In the 
	mask options toolbar press <quote>raster mask</quote> button to display additional mask controls.   
    </para>
    <sect5 id="raster_mask_usage_combobox">
      <title>raster mask combobox</title>
      <para>
        Values in raster mask combobox represent names of modules which have their raster mask calculated
	up in the pixelpipe. Choose the name of the module from which raster mask should be copied
	to the current module.
      </para>
      <warning>
	<para>
	  The raster mask can only be sourced from a module preceeding the current module in
	  the pixelpipe. Be sure not to move the source module after the one that uses it as this currently
	  may lead to undesirable effects (in the worst case, a darktable crash).
	</para>
      </warning>
    </sect5>  
    
  </sect4>

</sect3>
