<!DOCTYPE sect3 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
               "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
		<!ENTITY % darktable_dtd SYSTEM "../../dtd/darktable.dtd">
		%darktable_dtd;
		]>
<sect3 status="draft" id="raster_mask">

  <title>Raster mask</title>

  <indexterm>
    <primary>masks</primary>
    <secondary>raster masks</secondary>
  </indexterm>

  <para>
    Raster mask produced by <quote>drawn mask</quote>, <quote>parametric mask</quote> or their
    combination in the context of a specific module instance can be made accessible to module
    instances that follow in the pixelpipe.
  </para>

  <sect4 status="draft" id="raster_mask_overview">

    <title>Overview</title>

    <para>
      A mask defined in the context of a module instance determines the extent to which the module 
      instance result is blended with its input (see <xref linkend="blending"/>).  
    </para>

    <para>
      <quote>drawn mask</quote>, <quote>parametric mask</quote> or <quote>drawn and parameteric mask</quote>
      calculated for a specific module instance can be represented  
      as a raster mask, that is an image with the same pixel arrangement as the input image in which
      each pixel's intensity has a disrete value between zero and the maximum. Pixel's intensity in the raster 
      mask is directly proportional to the effect the module instance has on it, i.e. zero intencity
      pixels are not affected (in other words, get passed to module instance's output AS IS) and vice versa.
    </para>

    <para>
      The raster mask of a specific module instance may be used by any module instance that follows it in 
      the pixelpipe.
    </para>

  </sect4>

  <sect4 id="raster_mask_usage">

    <title>Usage</title>
    <para>
	Open the module instance which should use the raster mask from another module instance. In the 
	mask options toolbar press <quote>raster mask</quote> button to display additional mask options.   
    </para>
    <sect5 id="raster_mask_usage_combobox">
      <title>raster mask combobox</title>
      <para>
        Values in raster mask drop-down represent names of module instances which have a raster mask calculated
	up in the pixelpipe. Choose the name of the module instance from which raster mask should be copied
	to the current module instance.
      </para>
      <warning>
	The raster mask can only be sourced from a module instance preceeding the current module instance in
	the pixelpipe. Be sure not to move the source module instance after the one that uses it as it currently
	may lead to undesirable effects (in the worst case, a darktable crash).
      </warning>
    </sect5>  
    
  </sect4>

</sect3>
